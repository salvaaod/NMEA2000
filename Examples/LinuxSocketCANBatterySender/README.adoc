= Linux SocketCAN Battery PGN Sender (127508)

This example sends a static Battery Status message (PGN `127508`) once per second on `can0`.

== Required libraries

- This repository (`NMEA2000`)
- `NMEA2000_socketCAN` backend: https://github.com/ttlappalainen/NMEA2000_socketCAN

== Raspberry Pi setup (quick)

Bring up `can0` first (example at 250 kbit/s):

[source,bash]
----
sudo ip link set can0 down || true
sudo ip link set can0 up type can bitrate 250000
ip -details link show can0
----

== Build on Raspberry Pi

From a workspace where both repos are cloned side-by-side:

[source,text]
----
~/src/NMEA2000
~/src/NMEA2000_socketCAN
----

Compile:

[source,bash]
----
cd ~/src/NMEA2000

c++ -std=c++11 -O2 \
  -I./src \
  -I../NMEA2000_socketCAN \
  Examples/LinuxSocketCANBatterySender/main.cpp \
  src/N2kMsg.cpp \
  src/N2kStream.cpp \
  src/N2kMessages.cpp \
  src/N2kTimer.cpp \
  src/Seasmart.cpp \
  src/N2kDeviceList.cpp \
  src/N2kGroupFunction.cpp \
  src/N2kGroupFunctionDefaultHandlers.cpp \
  src/N2kMaretron.cpp \
  src/N2kCZone.cpp \
  src/NMEA2000.cpp \
  ../NMEA2000_socketCAN/NMEA2000_SocketCAN.cpp \
  -o battery_sender
----

Run:

[source,bash]
----
./battery_sender
----

The app publishes PGN `127508` every second with fixed values:

- Battery instance: `0`
- Voltage: `12.70 V`
- Current: `-3.20 A`
- Temperature: `298.15 K` (25 C)
